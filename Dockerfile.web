# FROM nginx:alpine
FROM nginx:1.27-alpine3.20

# Update packages to fix vulnerabilities
# Critical OpenSSL fixes: CVE-2025-15467, CVE-2024-12797, CVE-2025-69419, CVE-2025-69421
# Critical libexpat fix: CVE-2026-24515
# High severity fixes: libpng, libxslt, musl, xz-libs
RUN apk upgrade --no-cache libssl3 libcrypto3 libexpat libxml2 libpng libxslt musl musl-utils xz-libs

# Copy static web files
COPY web/ /usr/share/nginx/html/

# Copy nginx configuration
COPY config/nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]